<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Récompense - Scrabble des licornes</title>
  <link rel="stylesheet" href="/assets/css/récompense.css">
</head>

<body>
  <main class="jeu" role="application" aria-label="Scrabble des licornes - Récompense">

   

    <section class="recompense" aria-label="Écran de récompense">

      <div class="panneau" role="group" aria-label="Panneau récompense">

        <div>
            <h1 class="titre">Récompense</h1>
        </div>

        <!-- Ticket 3D -->
        <div class="scene">
          <div class="ticket3d" id="ticket3d" aria-label="Golden Ticket manipulable">
            <div class="face front">
              <img src="/assets/images/ticket_front.png" alt="Ticket recto" draggable="false">
            </div>
            <div class="face back">
              <img src="/assets/images/ticket_back.png" alt="Ticket verso" draggable="false">
            </div>
          </div>
        </div>

        <p class="hint">Fais glisser le ticket pour le tourner</p>

        <a href="/index.html" class="btn-rejouer">Rejouer</a>

      </div>

    </section>
  </main>

  <script>
    // Ticket 3D : rotation libre (souris + mobile)
    (() => {
      const ticket = document.getElementById("ticket3d");
      if (!ticket) return;

      let dragging = false;
      let lastX = 0, lastY = 0;
      let rotX = 0, rotY = 0;

      const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

      function apply() {
        ticket.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
      }

      ticket.addEventListener("pointerdown", (e) => {
        dragging = true;
        lastX = e.clientX;
        lastY = e.clientY;
        ticket.setPointerCapture(e.pointerId);
      });

      ticket.addEventListener("pointermove", (e) => {
        if (!dragging) return;

        const dx = e.clientX - lastX;
        const dy = e.clientY - lastY;

        rotY += dx * 0.35;   // gauche/droite
        rotX -= dy * 0.35;   // haut/bas

        // limite pour éviter les angles trop extrêmes
        rotX = clamp(rotX, -85, 85);

        lastX = e.clientX;
        lastY = e.clientY;

        apply();
      });

      function endDrag() { dragging = false; }

      ticket.addEventListener("pointerup", endDrag);
      ticket.addEventListener("pointercancel", endDrag);
      ticket.addEventListener("lostpointercapture", endDrag);

      // Double-clic / double tap (sur certains mobiles) : reset
      ticket.addEventListener("dblclick", () => {
        rotX = 0; rotY = 0;
        apply();
      });

      apply();
    })();

    // Bouton Rejouer (à brancher sur ton jeu)
    document.getElementById("btnRejouer")?.addEventListener("click", () => {
      // Exemple : window.location.href = "index.html";
      console.log("Rejouer cliqué");
    });
  </script>
</body>
</html>
