<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tableau des scores - Scrabble des licornes</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/score.css">
</head>

<body>
    <main class="jeu jeu--score" role="application" aria-label="Scrabble des licornes - Scores">

        <!-- Panneau central -->
        <section class="panneau" aria-label="Classement">
            <div class="panneau__bois panneau__bois--score" role="group" aria-label="Panneau scores">

                <h1 class="titre">Tableau des scores</h1>

                <!-- OPTION B : vrai tableau -->
                <table class="scoreboard" aria-label="Classement">
                    <thead>
                        <tr>
                            <th scope="col" class="scoreboard__th scoreboard__th--rank">Cl.</th>
                            <th scope="col" class="scoreboard__th scoreboard__th--name">Nom</th>
                            <th scope="col" class="scoreboard__th scoreboard__th--pts">Score</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr class="scoreboard__tr">
                            <td class="scoreboard__td scoreboard__rank">#1</td>
                            <td class="scoreboard__td scoreboard__name scoreboard__name--me">Karlvin</td>
                            <td class="scoreboard__td scoreboard__pts">360</td>
                        </tr>
                        <tr class="scoreboard__tr">
                            <td class="scoreboard__td scoreboard__rank">2e</td>
                            <td class="scoreboard__td scoreboard__name">ALEXANDRE</td>
                            <td class="scoreboard__td scoreboard__pts">340</td>
                        </tr>
                        <tr class="scoreboard__tr">
                            <td class="scoreboard__td scoreboard__rank">3e</td>
                            <td class="scoreboard__td scoreboard__name">SOPHIE</td>
                            <td class="scoreboard__td scoreboard__pts">320</td>
                        </tr>
                        <tr class="scoreboard__tr">
                            <td class="scoreboard__td scoreboard__rank">4e</td>
                            <td class="scoreboard__td scoreboard__name">MAYA</td>
                            <td class="scoreboard__td scoreboard__pts">300</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Ticket 3D -->
                <div class="scene">
                    <div class="ticket3d" id="ticket3d" aria-label="Golden Ticket manipulable">
                        <div class="face front">
                            <img src="../assets/images/medaille1_front.png" alt="Ticket recto" draggable="false">
                        </div>
                        <div class="face back">
                            <img src="../assets/images/medaille1_back.png" alt="Ticket verso" draggable="false">
                        </div>
                    </div>
                </div>

                <p class="hint">Fais tourner la m√©daille</p>

            </div>

            </div>
        </section>

        <!-- Navigation bas -->
        <footer class="actions actions--nav" aria-label="Actions">
            <a class="btn btn--back" href="/pages/jeu.html">Rejouer</a>
            <a class="btn btn--next" href="/pages/recompense.html">Suivant</a>
        </footer>

    </main>

    <script>
        // Ticket 3D : rotation libre (souris + mobile)
        (() => {
            const ticket = document.getElementById("ticket3d");
            if (!ticket) return;

            let dragging = false;
            let lastX = 0, lastY = 0;
            let rotX = 0, rotY = 0;

            const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

            function apply() {
                ticket.style.transform = `rotateX(${rotX}deg) rotateY(${rotY}deg)`;
            }

            ticket.addEventListener("pointerdown", (e) => {
                dragging = true;
                lastX = e.clientX;
                lastY = e.clientY;
                ticket.setPointerCapture(e.pointerId);
            });

            ticket.addEventListener("pointermove", (e) => {
                if (!dragging) return;

                const dx = e.clientX - lastX;
                const dy = e.clientY - lastY;

                rotY += dx * 0.35;
                rotX -= dy * 0.35;
                rotX = clamp(rotX, -85, 85);

                lastX = e.clientX;
                lastY = e.clientY;

                apply();
            });

            function endDrag() { dragging = false; }

            ticket.addEventListener("pointerup", endDrag);
            ticket.addEventListener("pointercancel", endDrag);
            ticket.addEventListener("lostpointercapture", endDrag);

            ticket.addEventListener("dblclick", () => {
                rotX = 0; rotY = 0;
                apply();
            });

            apply();
        })();
    </script>

</body>

</html>